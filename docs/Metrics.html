---

title: Metrics


keywords: fastai
sidebar: home_sidebar

summary: "Forecasting Metrics."
description: "Forecasting Metrics."
nb_path: "nbs/03_Metrics.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_Metrics.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Total-Error-(TE)">Total Error (TE)<a class="anchor-link" href="#Total-Error-(TE)"> </a></h2><blockquote><p>$ \sum^{n}_{i}y_{i} - \hat{y}_{i}$</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__total_error" class="doc_header"><code>__total_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L15" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__total_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the total error:</p>
<p>$\sum^{n}_{i}(ts[i] - f[i]), n = len(ts) = len(f)$</p>
<p>.Ignores nan values in times-series or the forecast.</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__total_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mf">1.</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__total_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">moving_average</span><span class="o">.</span><span class="n">SMA</span><span class="p">(</span>
    <span class="mi">1</span><span class="p">,</span>
    <span class="n">df</span><span class="o">=</span><span class="n">simulate_data</span><span class="o">.</span><span class="n">pandas_time_series</span><span class="p">(),</span>
<span class="p">)</span>

<span class="n">__total_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;time_series&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">f</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ma_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>2.795063162712527</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Absolute-Error-(AE)">Absolute Error (AE)<a class="anchor-link" href="#Absolute-Error-(AE)"> </a></h2><blockquote><p>$ \sum^{n}_{i} \vert y(t_{i}) - \hat{y}(t_{i})\vert $</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__absolute_error" class="doc_header"><code>__absolute_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L44" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__absolute_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the absolute error:</p>
<p>$\sum^{n}_{i}|ts[i] - f[i]|, n = len(ts) = len(f)$</p>
<p>.Ignores nan values in times-series or the forecast.</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__absolute_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__absolute_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Squared-Error-(SE)">Squared Error (SE)<a class="anchor-link" href="#Squared-Error-(SE)"> </a></h2><blockquote><p>$ \sum^{n}_{i} \vert y(t_{i}) - \hat{y}(t_{i})\vert^2 $</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__squared_error" class="doc_header"><code>__squared_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L74" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__squared_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the squared error:</p>
<p>$\sum^{n}_{i}|ts[i] - f[i]|**2, n = len(ts) = len(f)$</p>
<p>.Ignores nan values in times-series or the forecast.</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__squared_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__squared_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mean-Error">Mean Error<a class="anchor-link" href="#Mean-Error"> </a></h2><blockquote><p>$ \frac{1}{n}\sum^{n}_{i}y_{i} - \hat{y}_{i}$</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__mean_error" class="doc_header"><code>__mean_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L103" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__mean_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the mean error:</p>
<p>$(1/n)\sum^{n*}_{i}ts[i] - f[i], n* = len(ts) = len(f)$</p>
<p>.Ignores nan values in times-series or the forecast.
 Value n is n* minus the ignored values</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">__mean_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mean-Absolute-Error-(MAE)">Mean Absolute Error (MAE)<a class="anchor-link" href="#Mean-Absolute-Error-(MAE)"> </a></h2><blockquote><p>$ \frac{1}{n}\sum^{n}_{i} \vert y(t_{i}) - \hat{y}(t_{i})\vert $</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__mean_absolute_error" class="doc_header"><code>__mean_absolute_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L139" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__mean_absolute_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the mean absolute error:</p>
$$(1/n)\sum^{n}_{i} | ts[i] - f[i]|, n = len(ts) = len(f)$$<p>.Ignores nan values in times-series or the forecast.</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_absolute_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>


<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">__mean_absolute_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mean-Squared-Error-(MSE)">Mean Squared Error (MSE)<a class="anchor-link" href="#Mean-Squared-Error-(MSE)"> </a></h2><blockquote><p>$\frac{1}{n} \sum^{n}_{i}(y_{i} - \hat{y}_{i})^{2}$</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__mean_squared_error" class="doc_header"><code>__mean_squared_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L175" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__mean_squared_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the mean squared error:</p>
$$(1/n)\sum^{n}_{i} | ts[i] - f[i]|**2, n = len(ts) = len(f)$$<p>.Ignores nan values in times-series or the forecast.</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_squared_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="o">.</span><span class="mi">5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_squared_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Root-Mean-Square-Error-(RMSE)">Root Mean Square Error (RMSE)<a class="anchor-link" href="#Root-Mean-Square-Error-(RMSE)"> </a></h2><blockquote><p>$\sqrt{\frac{1}{n} \sum^{n}_{i}(y_{i} - \hat{y}_{i})^{2}}$</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__root_mean_square_error" class="doc_header"><code>__root_mean_square_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L210" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__root_mean_square_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the root mean square error:</p>
$$\sqrt{(1/n)\sum^{n}_{i} | ts[i] - f[i]|**2},  n = len(ts) = len(f)$$<p>.Ignores nan values in times-series or the forecast.</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__root_mean_square_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="o">.</span><span class="mi">5</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__root_mean_square_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mean-Percentage-Error-(MPE)">Mean Percentage Error (MPE)<a class="anchor-link" href="#Mean-Percentage-Error-(MPE)"> </a></h2><blockquote><p>$\frac{1}{n} \sum^{n}_{i}\frac{y_{i} - \hat{y}_{i}} { y_i} $</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__mean_percentage_error" class="doc_header"><code>__mean_percentage_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L238" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__mean_percentage_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the root mean percentage error:</p>
$$ (1/n)\sum ( ts[i] - f[i]) /ts[i],  n* = len(ts) = len(f)$$<p>.Ignores nan values and division by zero.
n is n* minus the ignored values</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_percentage_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="o">.</span><span class="mi">5</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_percentage_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mean-Absolute-Percent-Error-(MAPE)">Mean Absolute Percent Error (MAPE)<a class="anchor-link" href="#Mean-Absolute-Percent-Error-(MAPE)"> </a></h2><blockquote><p>$\frac{1}{n} \sum^{n}_{i}\vert \frac{y_{i} - \hat{y}_{i}} { y_i} \vert $</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__mean_absolute_percent_error" class="doc_header"><code>__mean_absolute_percent_error</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L276" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__mean_absolute_percent_error</code>(<strong><code>ts</code></strong>:<code>array</code>, <strong><code>f</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Computes the mean absolute percentage error:</p>
$$ (1/n)\sum | ts[i] - f[i]  /ts[i] ert,  n* = len(ts) = len(f)$$<p>.Ignores nan values and division by zero.
n is n* minus the ignored values</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ts : np.array with the time-series
f :  np.array with the forecast</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_absolute_percent_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span>
                                     <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mf">3.</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="mi">3</span><span class="p">),</span>
                                                       <span class="mi">3</span><span class="p">)</span>

<span class="n">ts</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">__mean_percentage_error</span><span class="p">(</span><span class="n">ts</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Summary">Summary<a class="anchor-link" href="#Summary"> </a></h2><blockquote><p>Summary of metrics</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="SUMMARY" class="doc_header"><code>SUMMARY</code><a href="https://github.com/kikejimenez/time_series_model_basics/tree/master/time_series_model_basics/metrics.py#L314" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>SUMMARY</code>(<strong><code>df</code></strong>:<code>DataFrame</code>=<em><code>None</code></em>, <strong><code>val_col</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>pred_cols</code></strong>:<code>List</code>[<code>str</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Summary of Prediction Metrics</p>
<hr>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>df : dataframe , dafault None. If None it will generate a simulated dataframe.
val_col : str , default None.  Name of the column with the actual values.
          It should be provided when a datafre is provided.
pred_cols : List[str] . Names of the columns with the predictions for the values
          If not provided it will take all dataframe columns except val_col</p>
<hr>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2><p>dataframe : Summary results</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">SUMMARY</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ma_1</th>
      <th>ma_4</th>
    </tr>
    <tr>
      <th>Error</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>total</th>
      <td>5.014113</td>
      <td>7.783203</td>
    </tr>
    <tr>
      <th>absolute</th>
      <td>21.970438</td>
      <td>22.912183</td>
    </tr>
    <tr>
      <th>squared</th>
      <td>25.868284</td>
      <td>30.116424</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.172900</td>
      <td>0.299354</td>
    </tr>
    <tr>
      <th>mean absolute</th>
      <td>0.757601</td>
      <td>0.881238</td>
    </tr>
    <tr>
      <th>mean squared</th>
      <td>0.892010</td>
      <td>1.158324</td>
    </tr>
    <tr>
      <th>root mean square</th>
      <td>0.944463</td>
      <td>1.076255</td>
    </tr>
    <tr>
      <th>mean percentage</th>
      <td>0.016861</td>
      <td>0.027478</td>
    </tr>
    <tr>
      <th>mean absolute percent</th>
      <td>0.127818</td>
      <td>0.144065</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Dataframes-and-Figures">Dataframes and Figures<a class="anchor-link" href="#Dataframes-and-Figures"> </a></h2><blockquote><p>Generates a Time Series Dataframe and a Figure Object</p>
<p>The Values of The Time  Series are Simulated</p>
<p>Includes Forecasting with Moving Averages</p>
</blockquote>

</div>
</div>
</div>
</div>
 

